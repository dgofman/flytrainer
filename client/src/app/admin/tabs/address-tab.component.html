<div>
    <div class="card-body">
        <form [formGroup]="formGroup" #myForm="ngForm" class="p-grid">
            <div class="ui-fluid p-md-5">
                <div class="row">
                    <label>{{Locales.description}}</label>
                    <p-autoComplete #desc appendTo="body" field="description" [dropdown]="addresses.length > 0"  [(ngModel)]="selectedAddress" [ngModelOptions]="{standalone: true}" (completeMethod)="filterAddress($event, desc)"></p-autoComplete>
                </div>
                <div class="row" *ngFor="let c of controls">
                    <label *ngIf="c.header">{{c.header}}</label>
                    <div  *ngIf="c.field=='other' && formGroup.controls.type.value =='Other'">
                        <label>{{Locales.other}}</label>
                        <input formControlName="other" pInputText/>
                    </div>
                    <div  *ngIf="c.field=='pobox' && formGroup.controls.type.value !='Home'">
                        <label>{{Locales.pobox}}</label>
                        <input formControlName="pobox" pInputText/>
                    </div>
                    <input *ngIf="c.type =='input'" [formControlName]="c.field" pInputText />
                    <p-dropdown *ngIf="c.type=='popup'" appendTo="body" [formControlName]="c.field" [options]="c.value" [placeholder]="c.placeholder"></p-dropdown>
                    <p-autoComplete *ngIf="c.type == 'auto'" ftAutoComplete [formControlName]="c.field" [data]="c.value"></p-autoComplete>
                    <p-inputMask *ngIf="c.type=='mask'" [mask]="c.value" [placeholder]="c.placeholder" [formControlName]="c.field"></p-inputMask>
                    <div *ngIf="c.type=='switch'"><p-inputSwitch [formControlName]="c.field" binary="true"></p-inputSwitch></div>
                    <div *ngIf="f[c.field].errors" style="color: red; ">
                        <div *ngIf="f[c.field].errors.required ">{{c.header}} is required</div>
                    </div>
                </div>
            </div>
            <div class="ui-fluid p-md-6">
                <div class="row" formGroupName="notes">
                    <label>{{Locales.notes}}</label>
                    <textarea formControlName="content" pInputTextarea [rows]="15"></textarea>
                </div>
            </div>
        </form>
        <div class="row footer">
            <button class="ui-button ui-button-text ui-button-secondary " style="margin-right: 15px" (click)="onReset()">{{Locales.new}}</button>
            <button *ngIf="addresses.length > 0" class="ui-button ui-button-text " (click)="onDelete()" [disabled]="!currentAddress">{{Locales.delete}}</button>
            <div class="right">
                <button class="ui-button ui-button-text " (click)="onSubmit()" [disabled]="!myForm.form.valid ">{{Locales.save}}</button>
            </div>
        </div>
    </div>
</div>